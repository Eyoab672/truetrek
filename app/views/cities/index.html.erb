<div class="homepage" data-controller="swipe-nav" data-swipe-nav-right-url-value="<%= conversations_path %>">
  <!-- Hero Section -->
  <section class="hero-section">
    <!-- Mobile Floating Header -->
    <% if user_signed_in? %>
      <div class="hero-floating-header d-flex d-md-none">
        <p class="hero-logo">TrueTrek</p>
        <div class="hero-icons">
          <%= link_to notifications_path, class: "hero-icon-link" do %>
            <i class="fa-regular fa-heart"></i>
            <% if current_user.unread_notifications_count > 0 %>
              <span class="hero-icon-badge"><%= current_user.unread_notifications_count %></span>
            <% end %>
          <% end %>
          <%= link_to conversations_path, class: "hero-icon-link" do %>
            <i class="fa-regular fa-paper-plane"></i>
            <% unread_dm = current_user.unread_messages_count + current_user.pending_message_requests_count %>
            <% if unread_dm > 0 %>
              <span class="hero-icon-badge"><%= unread_dm %></span>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

    <div class="hero-content">
      <h1 class="hero-title">Discover Your Next Adventure</h1>
      <p class="hero-subtitle">Explore breathtaking destinations and create unforgettable memories</p>

      <!-- Search Bar (links to search page) -->
      <%= link_to search_path, class: "search-container-link" do %>
        <div class="search-input-wrapper">
          <i class="fa-solid fa-magnifying-glass search-icon"></i>
          <span class="search-placeholder">Search people, places, posts...</span>
        </div>
      <% end %>
    </div>
    <div class="hero-overlay"></div>
  </section>

  <!-- Cities Section -->
  <section class="cities-section">
    <div class="section-header-home">
      <h2 class="section-title">Popular Destinations</h2>
      <p class="section-subtitle">Handpicked cities waiting to be explored</p>
    </div>

    <div class="cities-grid">
      <% @cities.each_with_index do |city, index| %>
        <%= link_to city_places_path(city), class: "city-card #{'featured' if index < 2}" do %>
          <div class="card-image" style="background-image: url('<%= city.img %>');"></div>
          <div class="card-overlay"></div>
          <div class="card-content">
            <h3 class="card-title"><%= city.name %></h3>
            <span class="card-cta">Explore <i class="fa-solid fa-arrow-right"></i></span>
          </div>
        <% end %>
      <% end %>
    </div>
  </section>
</div>
